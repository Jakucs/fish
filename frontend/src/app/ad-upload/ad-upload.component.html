<h2 class="container mt-3">Add el nem haszn√°lt horg√°szcuccaid</h2>

<form [formGroup]="productForm" (ngSubmit)="saveProduct()" novalidate>

  <!-- Term√©k neve -->
<div class="mb-3 container">
  <label for="productName" class="form-label">Term√©k neve</label>
  <input type="text"
         formControlName="name"
         class="form-control"
         id="productName"
         placeholder="Add meg a term√©k nev√©t"
         [ngClass]="{
           'is-invalid': productForm.controls['name'].invalid && productForm.controls['name'].touched
                         || errorMessagesFromBackend?.length
         }">

  <!-- Frontend valid√°ci√≥k -->
  <div *ngIf="productForm.controls['name'].touched && productForm.controls['name'].errors?.['required']"
       class="invalid-feedback">
    Term√©k neve megad√°sa k√∂telez≈ë.
  </div>

  <div *ngIf="productForm.controls['name'].touched && productForm.controls['name'].errors?.['minlength']"
       class="invalid-feedback">
    A term√©k neve legal√°bb 3 karakter hossz√∫ kell legyen.
  </div>

  <!-- üî¥ Backend hiba -->
  <div *ngIf="errorMessagesFromBackend?.length"
       class="invalid-feedback d-block">
    <div *ngFor="let msg of errorMessagesFromBackend">{{ msg }}</div>
  </div>
</div>


  <!-- Le√≠r√°s -->
<div class="mb-3 container">
  <label for="productDescription" class="form-label">Le√≠r√°s</label>
  <textarea
         formControlName="description"
         class="form-control"
         id="productDescription"
         rows="3"
         placeholder="Add meg a term√©k le√≠r√°s√°t"
         [ngClass]="{'is-invalid': productForm.controls['description'].invalid && productForm.controls['description'].touched}">
  </textarea>
  <div *ngIf="productForm.controls['description'].invalid && productForm.controls['description'].touched" class="invalid-feedback">
    Le√≠r√°s megad√°sa k√∂telez≈ë.
  </div>
</div>


  <!-- √År -->
  <div class="mb-3 container">
    <label for="productPrice" class="form-label">√År</label>
    
    <div class="input-group">
      <input type="number"
            formControlName="price"
            class="form-control"
            id="productPrice"
            placeholder="Add meg az √°rat"
            [ngClass]="{'is-invalid': productForm.controls['price'].invalid && productForm.controls['price'].touched}">
      <span class="input-group-text">Ft</span>
    </div>

    <div *ngIf="productForm.controls['price'].invalid && productForm.controls['price'].touched" class="invalid-feedback">
      √År megad√°sa k√∂telez≈ë.
    </div>

    <!-- Checkbox az √°r null√°z√°s√°hoz az input alatt -->
    <div class="form-check mt-2">
      <input class="form-check-input"
            type="checkbox"
            id="freePrice"
            (change)="onFreePriceChange($event)">
      <label class="form-check-label" for="freePrice">
        Ingyenes term√©k
      </label>
    </div>
  </div>


  <div class="mb-3 container">
  <label for="productType" class="form-label">Kateg√≥ria</label>
  <select
         formControlName="type_id"
         id="productType"
         class="form-select"
         [ngClass]="{'is-invalid': productForm.controls['type_id'].invalid && productForm.controls['type_id'].touched}">
            <option value="" disabled selected hidden>V√°lassz kateg√≥ri√°t</option>
            <option value="1">Botok</option>
            <option value="2">Ors√≥k</option>
            <option value="3">Zsin√≥rok</option>
            <option value="4">Csalik/Bojlik/Etet≈ëanyagok</option>
            <option value="5">M≈±csalik</option>
            <option value="6">Horgok</option>
            <option value="7">S√∫lyok/√ìlmok/Kosarak</option>
            <option value="8">√ösz√≥k</option>
            <option value="9">H√°l√≥k/Mer√≠t≈ëk</option>
            <option value="10">Kieg√©sz√≠t≈ë tartoz√©kok</option>
            <option value="11">Elektronika</option>
            <option value="12">S√°trak/Erny≈ëk</option>
            <option value="13">Botzs√°kok/T√°sk√°k</option>
            <option value="14">Sz√©kek</option>
            <option value="15">F√©der kieg√©sz√≠t≈ëk</option>
            <option value="16">Verseny l√°d√°k</option>
            <option value="17">Kap√°sjelz≈ëk/Halradarok</option>
            <option value="18">Apr√≥cikkek</option>

  </select>
  <div *ngIf="productForm.controls['type_id'].invalid && productForm.controls['type_id'].touched" class="invalid-feedback">
    Kateg√≥ria kiv√°laszt√°sa k√∂telez≈ë.
  </div>
</div>

  <div class="mb-3 container">
    <label for="productCondition" class="form-label">√Ållapot</label>
    <select
          formControlName="condition"
          id="productCondition"
          class="form-select"
          [ngClass]="{'is-invalid': productForm.controls['condition'].invalid && productForm.controls['condition'].touched}">
      <option value="" disabled hidden>V√°lassz √°llapotot</option>
      <option value="√∫j">√öj</option>
      <option value="√∫jszer≈±">√öjszer≈±</option>
      <option value="j√≥ √°llapot√∫">J√≥ √°llapot√∫</option>
      <option value="haszn√°lt">Haszn√°lt</option>
    </select>
    <div *ngIf="productForm.controls['condition'].invalid && productForm.controls['condition'].touched" class="invalid-feedback">
      √Ållapot kiv√°laszt√°sa k√∂telez≈ë.
    </div>
  </div>



<div class="mb-3 container">
  <label for="postal_code" class="form-label">Ir√°ny√≠t√≥sz√°m</label>
  <input type="text"
         formControlName="postal_code"
         class="form-control"
         id="postal_code"
         placeholder="Pl. 1061"
         (input)="getCityByZip()">
</div>

<div class="mb-3 container">
  <label for="city" class="form-label">V√°ros</label>
  <input type="text"
         formControlName="city"
         class="form-control"
         id="city"
         [readonly]="isCityReadonly"
         placeholder="Automatikusan kit√∂ltve vagy k√©zzel megadhat√≥">
</div>


<div *ngIf="showPhoneInput" class="mb-3 container">
  <label for="phone_number" class="form-label">Telefonsz√°m</label>
  <input type="text"
         formControlName="phone_number"
         class="form-control"
         id="phone_number"
         placeholder="Add meg a telefonsz√°modat"
         [ngClass]="{'is-invalid': productForm.controls['phone_number'].invalid && productForm.controls['phone_number'].touched}">
  <div *ngIf="productForm.controls['phone_number'].invalid && productForm.controls['phone_number'].touched" class="invalid-feedback">
    Telefonsz√°m megad√°sa k√∂telez≈ë.
  </div>
</div>








  <div class="container mb-3">
    <app-pics-upload class="container"></app-pics-upload>
    <button type="submit" class="btn btn-primary mt-3">Hirdet√©s ment√©se</button>
  </div>

</form>
