<div class="container mt-5" *ngIf="productDetails">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8 col-xl-7">
      <div class="card shadow-lg border-0 product-card">

        <!-- Termék galéria (carousel) -->
        <div *ngIf="productDetails.imagesArray && productDetails.imagesArray.length > 0" class="mb-4">
          <div id="productCarousel" class="carousel slide" data-bs-ride="carousel">
            
            <!-- Képek -->
            <div class="carousel-inner">
              <div
                class="carousel-item"
                *ngFor="let img of productDetails.imagesArray; let i = index"
                [class.active]="i === 0"
              >
                <img
                  [src]="img"
                  class="d-block w-100 rounded product-image"
                  [alt]="productDetails.name + ' kép ' + (i + 1)"
                  style="object-fit: cover; max-height: 450px;"
                />
              </div>
            </div>

            <!-- Navigációs nyilak -->
            <button
              class="carousel-control-prev"
              type="button"
              data-bs-target="#productCarousel"
              data-bs-slide="prev"
            >
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Előző</span>
            </button>

            <button
              class="carousel-control-next"
              type="button"
              data-bs-target="#productCarousel"
              data-bs-slide="next"
            >
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Következő</span>
            </button>

            <!-- Indikátor pöttyök -->
            <div class="carousel-indicators">
              <button
                *ngFor="let img of productDetails.imagesArray; let i = index"
                type="button"
                data-bs-target="#productCarousel"
                [attr.data-bs-slide-to]="i"
                [class.active]="i === 0"
                [attr.aria-current]="i === 0 ? 'true' : null"
                [attr.aria-label]="'Kép ' + (i + 1)"
              ></button>
            </div>
          </div>
        </div>

        <!-- Termék alap adatai -->
        <div class="card-body">
          <h2 class="card-title fw-bold">{{ productDetails.name }}</h2>
          <p class="text-muted mb-1">{{ productDetails.type_name }}</p>
          <p class="fw-bold fs-4" 
            [ngClass]="{'text-success': productDetails.price === 0}">
            {{ productDetails.price === 0 ? 'Ingyenes' : (productDetails.price + ' Ft') }}
          </p>



          <!-- Hirdetés adatok -->
          <div class="d-flex align-items-center mb-3">
          <!-- Bal oldalon a hely -->
          <span>
            <i class="bi bi-geo-alt-fill"></i>
            {{ productDetails.city }}, {{ productDetails.postal_code }}
          </span>

          <!-- Jobb oldalra tolva a felhasználói adatok és extra info -->
          <div class="ms-auto text-end">
            <div>
              <i class="bi bi-person-circle"></i>
              {{ productDetails.user.firstname }} {{ productDetails.user.lastname }}
            </div>
            <div>
              <i class="bi bi-envelope-fill"></i>
              {{ productDetails.user.email }}
            </div>
            <div>
              <i class="bi bi-clock-fill"></i>
              {{ productDetails.created_at | date:'short' }}
            </div>
            <div>
              <i class="bi bi-tag-fill"></i>
              {{ productDetails.type }}
            </div>
          </div>
        </div>


          <!-- Tulajdonságok táblázat -->
          <table class="table table-sm table-bordered mb-4">
            <tbody>
              <tr>
                <th scope="row">Állapot</th>
                <td>{{ productDetails.condition || 'N/A' }}</td>
              </tr>
              <tr>
                <th scope="row">Leírás</th>
                <td style="white-space: pre-wrap; word-break: break-word;">{{ productDetails.description || 'N/A' }}</td>
              </tr>
            </tbody>
          </table>

          <!-- CTA / Akció gomb -->
          <button
            type="button"
            class="btn btn-primary btn-lg"
            ngbPopover="{{ productDetails.user.phone_number }}"
            popoverTitle="Hirdető telefonszáma"
            triggers="click"
          >
            Kapcsolatfelvétel a hirdetővel
          </button>



        </div>
      </div>
    </div>
  </div>
</div>
